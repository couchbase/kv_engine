add_library(statistics STATIC
            collector.cc
            cbstat_collector.cc
            definitions.cc
            labelled_collector.cc
            prometheus.cc
            prometheus_collector.cc
            )
kv_enable_pch(statistics)
add_sanitizers(statistics)
add_dependencies(statistics generated_source_files)

INSTALL (FILES metrics_metadata_7.6.0-1627.json
        DESTINATION "etc/couchbase/kv"
        RENAME metrics_metadata.json)

target_include_directories(statistics
        PUBLIC ${Memcached_BINARY_DIR}/engines/ep/src)

target_link_libraries(statistics
        PUBLIC
                platform
                prometheus-cpp::core # ep-engine and core need the include path
        PRIVATE
                hdrhistogram
                Folly::headers
                mcd_util
                spdlog::spdlog
                prometheus-cpp::pull
                )
