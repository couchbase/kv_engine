add_library(memcached_daemon_mcbp OBJECT
        adjust_timeofday_executor.cc
        appendprepend_context.cc
        appendprepend_context.h
        arithmetic_context.cc
        arithmetic_context.h
        audit_configure_context.cc
        audit_configure_context.h
        background_thread_command_context.cc
        background_thread_command_context.h
        bucket_config_command_context.cc
        bucket_config_command_context.h
        bucket_management_command_context.cc
        bucket_management_command_context.h
        cluster_config_executor.cc
        collections_get_collection_id_executor.cc
        collections_get_manifest_executor.cc
        collections_get_scope_id_executor.cc
        command_context.h
        dcp_abort_executor.cc
        dcp_add_failover_log.cc
        dcp_add_failover_log.h
        dcp_add_stream_executor.cc
        dcp_buffer_acknowledgement_executor.cc
        dcp_cached_value.cc
        dcp_close_stream_executor.cc
        dcp_commit_executor.cc
        dcp_control_executor.cc
        dcp_deletion.cc
        dcp_deletion.h
        dcp_expiration.cc
        dcp_expiration.h
        dcp_get_failover_log_executor.cc
        dcp_mutation.cc
        dcp_mutation.h
        dcp_noop_executor.cc
        dcp_open_executor.cc
        dcp_prepare_executor.cc
        dcp_seqno_acknowledged_executor.cc
        dcp_set_vbucket_state_executor.cc
        dcp_snapshot_marker_executor.cc
        dcp_stream_end_executor.cc
        dcp_stream_req_executor.cc
        dcp_system_event_executor.cc
        dcp_system_event_executor.h
        delete_fusion_namespace_command_context.cc
        delete_fusion_namespace_command_context.h
        drop_privilege_executor.cc
        engine_wrapper.cc
        engine_wrapper.h
        executors.cc
        executors.h
        gat_context.cc
        gat_context.h
        get_cmd_timer_executor.cc
        get_context.cc
        get_context.h
        get_file_fragment_context.cc
        get_file_fragment_context.h
        get_fusion_namespaces_command_context.cc
        get_fusion_namespaces_command_context.h
        get_fusion_storage_snapshot_command_context.cc
        get_fusion_storage_snapshot_command_context.h
        get_locked_context.cc
        get_locked_context.h
        get_meta_context.cc
        get_meta_context.h
        get_vbucket_command_context.cc
        get_vbucket_command_context.h
        getex_context.cc
        getex_context.h
        hello_packet_executor.cc
        ifconfig_context.cc
        ifconfig_context.h
        ioctl_command_context.cc
        ioctl_command_context.h
        list_bucket_executor.cc
        mount_fusion_vbucket_command_context.cc
        mount_fusion_vbucket_command_context.h
        mutation_context.cc
        mutation_context.h
        observe_context.cc
        observe_context.h
        prepare_snapshot_context.cc
        prepare_snapshot_context.h
        prune_encryption_keys_context.cc
        prune_encryption_keys_context.h
        range_scan_cancel_executor.cc
        range_scan_continue_executor.cc
        range_scan_create_executor.cc
        rbac_reload_command_context.cc
        rbac_reload_command_context.h
        register_auth_token_command_context.cc
        register_auth_token_command_context.h
        release_fusion_storage_snapshot_command_context.cc
        release_fusion_storage_snapshot_command_context.h
        release_snapshot_context.cc
        release_snapshot_context.h
        remove_context.cc
        remove_context.h
        sasl_auth_command_context.cc
        sasl_auth_command_context.h
        sasl_refresh_command_context.cc
        sasl_refresh_command_context.h
        sasl_start_command_context.cc
        sasl_start_command_context.h
        sasl_step_command_context.cc
        sasl_step_command_context.h
        select_bucket_executor.cc
        set_active_encryption_keys_context.cc
        set_active_encryption_keys_context.h
        set_chronicle_auth_token_command_context.cc
        set_chronicle_auth_token_command_context.h
        set_cluster_config_command_context.cc
        set_cluster_config_command_context.h
        set_param_command_context.cc
        set_param_command_context.h
        set_vbucket_command_context.cc
        set_vbucket_command_context.h
        settings_reload_command_context.cc
        settings_reload_command_context.h
        single_state_steppable_context.cc
        single_state_steppable_context.h
        stats_context.cc
        stats_context.h
        steppable_command_context.cc
        steppable_command_context.h
        sync_fusion_logstore_command_context.cc
        sync_fusion_logstore_command_context.h
        unknown_packet_command_context.cc
        unknown_packet_command_context.h
        unmount_fusion_vbucket_command_context.cc
        unmount_fusion_vbucket_command_context.h
        utilities.h)
kv_enable_pch(memcached_daemon_mcbp)
cb_enable_unity_build(memcached_daemon_mcbp)
target_include_directories(memcached_daemon_mcbp
        SYSTEM PRIVATE ${Memcached_BINARY_DIR})
target_link_libraries(memcached_daemon_mcbp
        PRIVATE
        memcached_daemon_protocol_utils
        Folly::folly
        magma_support
        hdrhistogram
        memcached_logger
        nlohmann_json::nlohmann_json
        phosphor
        platform
        sigar_cpp
        statistics
        subjson)
